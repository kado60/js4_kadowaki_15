<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="./project/css/sample2.css">
<title>わたしの本棚</title>
</head>

<body>
   <h1 id="yourShelf"></h1>
   <input type="text" id="name" value="" placeholder="あなたの名前を入れてください">
   <button id="nameDecide" >名前を決める</button>
    <div class="mainShelf">
        
    </div>
    <div id="output"></div>


</body>


<script src="./project/js/jquery-3.5.1.min.js"></script>

<!-- Firebaseを使えるようにする -->
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
    import { getDatabase, ref, push, set, onChildAdded, remove, onChildRemoved }
          from "https://cdnjs.cloudflare.com/ajax/libs/firebase/9.15.0/firebase-database.js"; //「.min」を消す必要あり。
  
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyA7Up87lhWUOs7VreoeYUqaCAytcWROkqg",
      authDomain: "fir-bookshelf-8db86.firebaseapp.com",
      projectId: "fir-bookshelf-8db86",
      storageBucket: "fir-bookshelf-8db86.appspot.com",
      messagingSenderId: "906116085639",
      appId: "1:906116085639:web:31c049d00c710611844522"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
  
    // Realtime DBに接続
    const db = getDatabase(app);
    // Realtime DB内のbookshelfを使う。bookshelfという場所に格納する。
    const dbRef = ref(db, "bookshelf");
  



$("#nameDecide").on("click", function(){
    let yourName = document.getElementById("name").value;
    // console.log(yourName);
    document.title =yourName + "の本棚";
    $("#yourShelf").html(yourName + "の本棚")
    // ボタンが押されたら、名前入力欄は非表示にしたい
    $("#name").hide();
    $("#nameDecide").hide();
});

onChildAdded(dbRef, function(data){

        const key = data.key
        const msg = data.val();
        $("#output").append(h);
    });
</script>